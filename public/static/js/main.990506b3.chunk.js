(this["webpackJsonpfoodstore-ui"]=this["webpackJsonpfoodstore-ui"]||[]).push([[0],{135:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a.n(n),s=a(29),i=a.n(s),l=a(10),o=a(12),u=a(14),j=a(35),d="/features/Auth/USER_LOGIN",b="/features/Auth/USER_LOGOUT",m=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{user:null,token:null};var h=a(13),O=a(8),p="/features/Products/START_FETCHING_PRODUCT",x="/features/Products/ERROR_FETCHING_PRODUCT",f="/features/Products/SUCCESS_FETCHING_PRODUCT",g="/features/Products/SET_PAGE",v="/features/Products/SET_KEYWORD",k="/features/Products/SET_CATEGORY",y="/features/Products/SET_TAGS",w="/features/Products/NEXT_PAGE",S="/features/Products/PREV_PAGE",P="/features/Products/TOGGLE_TAG",_="process",N="success",I="error",C={data:[],currentPage:1,totalItems:-1,perPage:6,keyword:"",category:"",tags:[],status:"idle"};var E="/features/Cart/ADD_ITEM",T="/features/Cart/REMOVE_ITEM",A="/features/Cart/CLEAR_ITEMS",q="/features/Cart/SET_ITEMS",M=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];var D=a(76),L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||j.d,B=Object(j.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return{user:t.user,token:t.token};case b:return{user:null,token:null};default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(O.a)(Object(O.a)({},e),{},{status:_});case x:return Object(O.a)(Object(O.a)({},e),{},{status:I});case f:return Object(O.a)(Object(O.a)({},e),{},{status:N,data:t.data,totalItems:t.count});case g:return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.currentPage});case v:return Object(O.a)(Object(O.a)({},e),{},{keyword:t.keyword,category:"",tags:[]});case k:return Object(O.a)(Object(O.a)({},e),{},{currentPage:1,tags:[],category:t.category,keyword:""});case y:return Object(O.a)(Object(O.a)({},e),{},{tags:t.tags});case P:return e.tags.includes(t.tag)?Object(O.a)(Object(O.a)({},e),{},{currentPage:1,tags:e.tags.filter((function(e){return e!==t.tag}))}):Object(O.a)(Object(O.a)({},e),{},{currentPage:1,tags:[].concat(Object(h.a)(e.tags),[t.tag])});case w:return Object(O.a)(Object(O.a)({},e),{},{currentPage:e.currentPage+1});case S:return Object(O.a)(Object(O.a)({},e),{},{currentPage:e.currentPage-1});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return e.find((function(e){return e._id===t.item._id}))?e.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{qty:e._id===t.item._id?e.qty+1:e.qty})})):[].concat(Object(h.a)(e),[Object(O.a)(Object(O.a)({},t.item),{},{qty:1})]);case T:return e.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{qty:e._id===t.item._id?e.qty-1:e.qty})})).filter((function(e){return e.qty>0}));case A:return[];case q:return t.items;default:return e}}}),H=Object(j.e)(B,L(Object(j.a)(D.a))),z=(a(96),a(2)),R=[{icon:"/images/menus/semua.png",label:"Semua",id:""},{icon:"/images/menus/utama.png",label:"Utama",id:"Utama"},{icon:"/images/menus/minuman.png",label:"Minuman",id:"Minuman"},{icon:"/images/menus/snack.png",label:"Snack",id:"Snack"},{icon:"/images/menus/pastry.png",label:"Pastry",id:"Pastry"}],K=a(77);a.n(K).a.config();var J="http://localhost:3000",U="Awesome Store",G="20000",F="Ahmad Fajar Frieyatna",V="ahmadfajar313@gmail.com",X={no_billing:"083147579574",payment:"OVO"};function W(){return Object(r.jsx)(l.b,{to:"/",children:Object(r.jsx)("div",{className:"text-red-600 font-bold text-4x1",children:U})})}var Y=a(78),$=a.n(Y);function Q(){var e,t=Object(u.c)((function(e){return e.auth}));return Object(r.jsxs)(z.n,{desktop:2,justify:"between",items:"center",children:[Object(r.jsx)("div",{children:Object(r.jsx)(W,{})}),Object(r.jsx)("div",{className:"mr-5 text-right",children:Object(r.jsxs)(l.b,{to:(null===t||void 0===t?void 0:t.user)?"/account":"/login",children:[Object(r.jsx)("div",{className:"mr-2 inline-block text-red-600 font-bold",children:null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.full_name}),Object(r.jsx)(z.c,{icon:Object(r.jsx)($.a,{})})]})})]})}var Z={"":[],Utama:["burger","pizza","bread"],Pastry:["cheese","strawberry","muffin"],Snack:["fried","bread","cheese","coffe"],Minuman:["coffe","tea","hot","cold"]},ee=a(4),te=a.n(ee),ae=a(7),re=a(15),ne=a.n(re);function ce(){return(ce=Object(ae.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("".concat(J,"/api/products"),{params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=a(79),ie=function(e){var t=e.data,a=e.count;return{type:f,data:t,count:a}},le=a.n(se)()((function(e){return ce.apply(this,arguments)}),1e3),oe=a(38),ue=a.n(oe),je=a(34),de=a.n(je),be=a(49),me=a.n(be);function he(e){return e.reduce((function(e,t){return e+t.price*t.qty}),0)}function Oe(e){return isNaN(parseInt(e))?"":new Intl.NumberFormat("id-ID",{maximumSignificantDigits:2,style:"currency",currency:"IDR"}).format(e)}function pe(e){var t=e.items,a=e.onItemInc,n=e.onItemDec,c=e.onCheckout,s=he(t);return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"px-2 border-b mt-5 pb-5",children:[Object(r.jsxs)("div",{className:"text-3xl flex items-center text-red-700",children:[Object(r.jsx)(me.a,{}),Object(r.jsx)("div",{className:"ml-2",children:"Keranjang"})]}),Object(r.jsxs)(z.s,{as:"h5",children:["Total: ",Oe(s)]}),Object(r.jsx)(z.b,{text:"Checkout",fitContainer:!0,iconAfter:Object(r.jsx)(de.a,{}),disabled:!t.length,onClick:c})]}),t.length?null:Object(r.jsx)("div",{className:"text-center text-sm text-red-900",children:"Belum ada item dikeranjang belanja"}),Object(r.jsx)("div",{className:"p-2",children:t.map((function(e,t){return Object(r.jsx)("div",{className:"mb-2",children:Object(r.jsx)(z.e,{imgUrl:"".concat(J,"/upload/").concat(e.image_url),name:e.name,qty:e.qty,color:"orange",onInc:function(t){return a(e)},onDec:function(t){return n(e)}})},t)}))})]})}function xe(e){return{type:E,item:e}}function fe(){return{type:A}}function ge(e){return{type:q,items:e}}function ve(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.products})),a=Object(u.c)((function(e){return e.cart})),c=Object(o.g)();return n.useEffect((function(){e(function(){var e=Object(ae.a)(te.a.mark((function e(t,a){var r,n,c,s,i,l,o,u,j,d;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:p}),r=a().products.perPage||9,n=a().products.currentPage||1,c=a().products.tags||[],s=a().products.keyword||"",i=a().products.category||"",l={limit:r,skip:n*r-r,q:s,tags:c,category:i},e.prev=7,e.next=10,le(l);case 10:o=e.sent,u=o.data,j=u.data,d=u.count,t(ie({data:j,count:d})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),t({type:x});case 20:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t,a){return e.apply(this,arguments)}}())}),[e,t.currentPage,t.keyword,t.category,t.tags]),Object(r.jsx)("div",{children:Object(r.jsx)(z.k,{sidebar:Object(r.jsx)(z.p,{items:R,verticalAlign:"top",active:t.category,onChange:function(t){return e(function(e){return{type:k,category:e}}(t))}}),content:Object(r.jsxs)("div",{className:"md:flex w-full mr-5 h-full min-h-screen md:flex-row-reverse",children:[Object(r.jsxs)("div",{className:"w-full md:w-3/4 pl-5 pb-10",children:[Object(r.jsx)(Q,{}),Object(r.jsx)("div",{className:"w-full text-center mb-10 mt-5",children:Object(r.jsx)(z.i,{fullRound:!0,value:t.keyword,placeholder:"Search...",fitContainer:!0,onChange:function(t){return e((a=t.target.value,{type:v,keyword:a}));var a}})}),Object(r.jsx)("div",{className:"mb-5 pl-2 flex w-3/4 overflow-auto pb-5",children:Z[t.category].map((function(a,n){return Object(r.jsx)("div",{children:Object(r.jsx)(z.m,{text:a,isActive:t.tags.includes(a),icon:a.slice(0,1).toUpperCase(),onClick:function(t){return e(function(e){return{type:P,tag:e}}(a))}})},n)}))}),"process"!==t.status||t.data.length?null:Object(r.jsx)("div",{className:"flex justify-center",children:Object(r.jsx)(ue.a,{color:"red"})}),Object(r.jsx)(z.n,{desktop:3,items:"stretch",children:t.data.map((function(t,a){return Object(r.jsx)("div",{className:"p-2",children:Object(r.jsx)(z.f,{title:t.name,imgUrl:"".concat(J,"/upload/").concat(t.image_url),price:t.price,onAddToCart:function(a){return e(xe(t))}})},a)}))}),Object(r.jsx)("div",{className:"text-center my-10",children:Object(r.jsx)(z.l,{totalItems:t.totalItems,page:t.currentPage,perPage:t.perPage,onChange:function(t){return e(function(){return{type:g,currentPage:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}}(t))},onNext:function(t){return e({type:w})},onPrev:function(t){return e({type:S})}})})]}),Object(r.jsx)("div",{className:"w-full md:w-1/4 h-full shadow-lg border-r border-white bg-gray-100",children:Object(r.jsx)(pe,{items:a,onItemInc:function(t){return e(xe(t))},onItemDec:function(t){return e(function(e){return{type:T,item:e}}(t))},onCheckout:function(e){return c.push("/checkout")}})})]}),sidebarSize:80})})}var ke=a(9),ye=a(39),we={required:{value:!0,message:"Nama lengkap harus diisi"},maxLength:{value:300,message:"Panjang nama lengkap maksimal 300 karakter"}},Se={required:{value:!0,message:"Email harus diisi"},maxLength:{value:255,message:"Panjang email maksimal 255 karakter"},pattern:{value:/^([\w-.]+@([\w-]+.)+[\w-]{2,4})?$/,message:"Email tidak valid"}},Pe={required:{value:!0,message:"Password harus diisi"},maxLength:{value:255,message:"Panjang password maksimal 255 karakter"}},_e={required:{value:!0,message:"Konfirmasi password harus diisi"}};function Ne(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(ae.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.post("".concat(J,"/auth/register"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(ae.a)(te.a.mark((function e(t,a){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.post("".concat(J,"/auth/login"),{email:t,password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(){return(Te=Object(ae.a)(te.a.mark((function e(){var t,a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},a=t.token,e.next=3,ne.a.post("".concat(J,"/auth/logout"),null,{headers:{authorization:"Bearer ".concat(a)}}).then((function(e){return localStorage.removeItem("auth"),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae="idle",qe="procces",Me="success",De="error";function Le(){var e,t,a,c,s=Object(ye.a)(),i=s.register,u=s.handleSubmit,j=s.errors,d=s.setError,b=n.useState(Ae),m=Object(ke.a)(b,2),h=m[0],O=m[1],p=Object(o.g)(),x=function(){var e=Object(ae.a)(te.a.mark((function e(t){var a,r,n,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.password,r=t.password_confirmation,a===r){e.next=3;break}return e.abrupt("return",d("password_confirmation",{type:"equality",message:"Konfirmasi password harus sama dengan password"}));case 3:return O(qe),e.next=6,Ne(t);case 6:n=e.sent,(c=n.data).error&&(Object.keys(c.fields).forEach((function(e){var t,a;d(e,{type:"server",message:null===(t=c.fields[e])||void 0===t||null===(a=t.properties)||void 0===a?void 0:a.message})})),O(De)),O(Me),p.push("/register/berhasil");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(z.j,{size:"small",children:Object(r.jsxs)(z.d,{color:"white",children:[Object(r.jsx)("div",{className:"text-center mb-5",children:Object(r.jsx)(W,{})}),Object(r.jsxs)("form",{onSubmit:u(x),children:[Object(r.jsx)(z.g,{errorMessage:null===(e=j.full_name)||void 0===e?void 0:e.message,children:Object(r.jsx)(z.i,{name:"full_name",placeholder:"Nama Lengkap",fitContainer:!0,ref:i(we)})}),Object(r.jsx)(z.g,{errorMessage:null===(t=j.email)||void 0===t?void 0:t.message,children:Object(r.jsx)(z.i,{name:"email",placeholder:"Email",fitContainer:!0,ref:i(Se)})}),Object(r.jsx)(z.g,{errorMessage:null===(a=j.password)||void 0===a?void 0:a.message,children:Object(r.jsx)(z.h,{name:"password",placeholder:"Password",fitContainer:!0,ref:i(Pe)})}),Object(r.jsx)(z.g,{errorMessage:null===(c=j.password_confirmation)||void 0===c?void 0:c.message,children:Object(r.jsx)(z.h,{name:"password_confirmation",placeholder:"Konfirmasi Password",fitContainer:!0,ref:i(_e)})}),Object(r.jsx)(z.b,{size:"large",fitContainer:!0,disabled:h===qe,children:h===qe?"Sedang Memproses":"Mendaftar"})]}),Object(r.jsxs)("div",{className:"text-center mt-2",children:["Sudah punya akun ?",Object(r.jsx)(l.b,{to:"/login",children:Object(r.jsx)("b",{children:"Masuk Sekarang."})})]})]})})}function Be(){return Object(r.jsx)(z.j,{size:"small",children:Object(r.jsxs)(z.d,{color:"white",children:[Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)(z.s,{as:"h3",children:"Pendaftaran Berhasil"}),Object(r.jsx)(z.s,{children:"Silahkan Masuk Aplikasi"})]}),Object(r.jsx)("br",{}),Object(r.jsx)(l.b,{to:"/login",children:Object(r.jsx)(z.b,{fitContainer:!0,children:"Masuk"})})]})})}function He(e,t){return{type:d,user:e,token:t}}var ze={required:{value:!0,message:"Email tidak boleh kosong"},maxLength:{value:255,message:"Panjang maksimal email adalah 255 karakter"}},Re={required:{value:!0,message:"Password tidak boleh kosong"},maxLength:{value:255,message:"Panjang maksimal password adalah 255 karakter"}},Ke="idle",Je="process",Ue="success",Ge="error";function Fe(){var e,t,a=Object(ye.a)(),c=a.register,s=a.handleSubmit,i=a.errors,j=a.setError,d=n.useState(Ke),b=Object(ke.a)(d,2),m=b[0],h=b[1],O=Object(u.b)(),p=Object(o.g)(),x=function(){var e=Object(ae.a)(te.a.mark((function e(t){var a,r,n,c,s,i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,r=t.password,h(Je),e.next=4,Ce(a,r);case 4:n=e.sent,(c=n.data).error?(j("password",{type:"inavlidCredential",message:c.message}),h(Ge)):(s=c.user,i=c.token,O(He(s,i)),p.push("/")),h(Ue);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(z.j,{size:"small",children:[Object(r.jsx)("br",{}),Object(r.jsxs)(z.d,{color:"white",children:[Object(r.jsx)("div",{className:"text-center mb-5",children:Object(r.jsx)(W,{})}),Object(r.jsxs)("form",{onSubmit:s(x),children:[Object(r.jsx)(z.g,{errorMessage:null===(e=i.email)||void 0===e?void 0:e.message,children:Object(r.jsx)(z.i,{placeholder:"Email",fitContainer:!0,name:"email",ref:c(ze)})}),Object(r.jsx)(z.g,{errorMessage:null===(t=i.password)||void 0===t?void 0:t.message,children:Object(r.jsx)(z.h,{placeholder:"Password",fitContainer:!0,name:"password",ref:c(Re)})}),Object(r.jsx)(z.b,{fitContainer:!0,size:"large",disabled:"process"===m,children:"Login"})]}),Object(r.jsxs)("div",{className:"text-center mt-2",children:["Belum punya akun ?",Object(r.jsx)(l.b,{to:"/register",children:Object(r.jsx)("b",{children:"Daftar Sekarang"})})]})]})]})}function Ve(e){var t=e.tingkat,a=e.kodeInduk,c=e.onChange,s=e.value,i=n.useState([]),l=Object(ke.a)(i,2),o=l[0],u=l[1],j=n.useState(!1),d=Object(ke.a)(j,2),b=d[0],m=d[1];return n.useEffect((function(){m(!0),ne.a.get("".concat(J,"/api/wilayah/").concat(t,"?kode_induk=").concat(a)).then((function(e){var t=e.data;return u(t)})).finally((function(e){return m(!1)}))}),[a,t]),Object(r.jsx)(z.o,{options:o.map((function(e){return{label:e.nama,value:e.kode}})),onChange:c,value:s,isLoading:b,isDisable:b||!o.length})}Ve.defaultProps={tingkat:"provinsi"};var Xe={required:{value:!0,message:"Nama alamat tidak boleh kosong"},maxLength:{value:500,message:"Panjang nama alamat maksimal 500 karakter"},minLength:{value:5,message:"Panjang nama alamat minimal 5 karakter"}},We={required:{value:!0,message:"Provinsi harus dipilih"}},Ye={required:{value:!0,message:"Kabupaten harus dipilih"}},$e={required:{value:!0,message:"Kecamatan harus dipilih"}},Qe={required:{value:!0,message:"Kelurahan harus dipilih"}},Ze={required:{value:!0,message:"Detail alamat harus diisi"},maxLength:{value:1e3,message:"Panjang detail alamat maksimal 1000 karakter"}};function et(e){return tt.apply(this,arguments)}function tt(){return(tt=Object(ae.a)(te.a.mark((function e(t){var a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,ne.a.get("".concat(J,"/api/delivery-addresses"),{params:{limit:t.limit,skip:t.page*t.limit-t.limit},headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(ae.a)(te.a.mark((function e(t){var a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,ne.a.post(J+"/api/delivery-addresses",t,{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(){var e,t,a,c,s,i,l,u,j,d=Object(o.g)(),b=Object(ye.a)(),m=b.handleSubmit,h=b.register,O=b.errors,p=b.setValue,x=b.watch,f=b.getValues,g=x();n.useEffect((function(){h({name:"provinsi"},We),h({name:"kabupaten"},Ye),h({name:"kecamatan"},$e),h({name:"kelurahan"},Qe)}),[h]),n.useEffect((function(){p("kabupaten",null),p("kecamatan",null),p("kelurahan",null)}),[g.provinsi,p]),n.useEffect((function(){p("kecamatan",null),p("kelurahan",null)}),[g.kabupaten,p]),n.useEffect((function(){p("kelurahan",null)}),[g.kecamatan,p]);var v=function(e,t){return p(e,t,{shouldValidate:!0,shouldDirty:!0})},k=function(){var e=Object(ae.a)(te.a.mark((function e(t){var a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={nama:t.nama_alamat,provinsi:t.provinsi.label,kabupaten:t.kabupaten.label,kecamatan:t.kecamatan.label,kelurahan:t.kelurahan.label,detail:t.detail_alamat},e.next=3,at(a);case 3:if(r=e.sent,!r.data.error){e.next=7;break}return e.abrupt("return");case 7:d.push("/alamat-pengiriman");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(z.j,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:m(k),children:[Object(r.jsx)(z.g,{label:"Nama alamat",errorMessage:null===(e=O.nama_alamat)||void 0===e?void 0:e.message,color:"black",children:Object(r.jsx)(z.i,{placeholder:"Nama alamat",fitContainer:!0,name:"nama_alamat",ref:h(Xe)})}),Object(r.jsx)(z.g,{label:"Provinsi",errorMessage:null===(t=O.provinsi)||void 0===t?void 0:t.message,color:"black",children:Object(r.jsx)(Ve,{onChange:function(e){return v("provinsi",e)},name:"provinsi",value:f().provinsi})}),Object(r.jsx)(z.g,{label:"Kabupaten/kota",errorMessage:null===(a=O.kabupaten)||void 0===a?void 0:a.message,color:"black",children:Object(r.jsx)(Ve,{tingkat:"kabupaten",kodeInduk:null===(c=f().provinsi)||void 0===c?void 0:c.value,onChange:function(e){return v("kabupaten",e)},value:f().kabupaten})}),Object(r.jsx)(z.g,{label:"Kecamatan",errorMessage:null===(s=O.kecamatan)||void 0===s?void 0:s.message,color:"black",children:Object(r.jsx)(Ve,{tingkat:"kecamatan",kodeInduk:null===(i=f().kabupaten)||void 0===i?void 0:i.value,onChange:function(e){return v("kecamatan",e)},value:f().kecamatan})}),Object(r.jsx)(z.g,{label:"Kelurahan",errorMessage:null===(l=O.kelurahan)||void 0===l?void 0:l.message,color:"black",children:Object(r.jsx)(Ve,{tingkat:"desa",kodeInduk:null===(u=f().kecamatan)||void 0===u?void 0:u.value,onChange:function(e){return v("kelurahan",e)},value:f().kelurahan})}),Object(r.jsx)(z.g,{label:"Detail alamat",errorMessage:null===(j=O.detail_alamat)||void 0===j?void 0:j.message,color:"black",children:Object(r.jsx)(z.t,{placeholder:"Detail alamat",fitContainer:!0,name:"detail_alamat",ref:h(Ze)})}),Object(r.jsx)(z.b,{fitContainer:!0,children:"Simpan"})]})})]})}var ct="idle",st="process",it="success",lt="error";function ot(){var e=n.useState([]),t=Object(ke.a)(e,2),a=t[0],r=t[1],c=n.useState(0),s=Object(ke.a)(c,2),i=s[0],l=s[1],o=n.useState(ct),u=Object(ke.a)(o,2),j=u[0],d=u[1],b=n.useState(1),m=Object(ke.a)(b,2),h=m[0],O=m[1],p=n.useState(10),x=Object(ke.a)(p,2),f=x[0],g=x[1],v=n.useCallback(Object(ae.a)(te.a.mark((function e(){var t,a,n,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(st),e.next=3,et({page:h,limit:f});case 3:if(t=e.sent,a=t.data,n=a.data,c=a.count,!a.error){e.next=11;break}return d(lt),e.abrupt("return");case 11:d(it),r(n),l(c);case 14:case"end":return e.stop()}}),e)}))),[h,f]);return n.useEffect((function(){v()}),[v]),{data:a,count:i,status:j,page:h,limit:f,setPage:O,setLimit:g}}var ut=[{Header:"Nama",accessor:"nama"},{Header:"Detail",accessor:function(e){return Object(r.jsxs)("div",{children:[e.provinsi,", ",e.kabupaten,", ",e.kecamatan,",",e.kelurahan,Object(r.jsx)("br",{}),e.detail]})}}];function jt(){var e=ot(),t=e.data,a=e.limit,n=e.page,c=e.status,s=e.count,i=e.setPage;return Object(r.jsx)(z.j,{size:"large",children:Object(r.jsxs)("div",{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(z.s,{as:"h3",children:"Alamat Pengiriman"}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{children:[Object(r.jsx)(l.b,{to:"alamat-pengiriman/tambah",children:Object(r.jsx)(z.b,{children:"Tambah Alamat"})}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)(z.r,{items:t,columns:ut,totalItems:s,page:n,perPage:a,isLoading:"process"===c,onPageChange:function(e){return i(e)}})]}),"success"!==c||t.length?null:Object(r.jsxs)("div",{className:"text-center p-10",children:["Kamu belum menambahkan alamat pengiriman. ",Object(r.jsx)("br",{}),Object(r.jsx)(l.b,{to:"/alamat-pengiriman/tambah",children:"Tambah Alamat"})]})]})})}var dt=a(80),bt=a.n(dt),mt=a(81),ht=a.n(mt),Ot=a(57),pt=a.n(Ot),xt=a(82),ft=a.n(xt);function gt(e){return vt.apply(this,arguments)}function vt(){return(vt=Object(ae.a)(te.a.mark((function e(t){var a,r,n,c,s;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,n=t.limit,c=t.page,s=c*n-n,e.next=5,ne.a.get("".concat(J,"/api/orders"),{params:{skip:s,limit:n},headers:{authorization:"Bearer ".concat(r)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kt(e){return yt.apply(this,arguments)}function yt(){return(yt=Object(ae.a)(te.a.mark((function e(t){var a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,ne.a.post("".concat(J,"/api/orders"),t,{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wt=function(e){var t=e.children;return Object(r.jsx)("div",{className:"text-3xl flex justify-center",children:t})},St=[{label:"Item",icon:Object(r.jsx)(wt,{children:Object(r.jsx)(me.a,{})})},{label:"Alamat",icon:Object(r.jsx)(wt,{children:Object(r.jsx)(bt.a,{})})},{label:"Konfirmasi",icon:Object(r.jsx)(wt,{children:Object(r.jsx)(ht.a,{})})}],Pt=[{Header:"Nama Produk",accessor:function(e){return Object(r.jsxs)("div",{className:"flex items-center",children:[Object(r.jsx)("img",{src:"".concat(J,"/upload/").concat(e.image_url),width:48,alt:e.name}),e.name]})}},{Header:"Jumlah",accessor:"qty"},{Header:"Harga Satuan",id:"price",accessor:function(e){return Object(r.jsxs)("span",{children:["@",Oe(e.price)]})}},{Header:"Harga Total",id:"subtotal",accessor:function(e){return Object(r.jsx)("div",{children:Oe(e.price*e.qty)})}}],_t=[{Header:"Nama Alamat",accessor:function(e){return Object(r.jsxs)("div",{children:[e.nama," ",Object(r.jsx)("br",{}),Object(r.jsxs)("small",{children:[e.provinsi,", ",e.kabupaten,", ",e.kecamatan,","," ",e.kelurahan," ",Object(r.jsx)("br",{}),e.detail]})]})}}];function Nt(){var e=n.useState(0),t=Object(ke.a)(e,2),a=t[0],c=t[1],s=n.useState(null),i=Object(ke.a)(s,2),j=i[0],d=i[1],b=Object(u.c)((function(e){return e.cart})),m=ot(),h=m.data,O=m.count,p=m.limit,x=m.page,f=m.status,g=m.setPage,v=Object(o.g)(),k=Object(u.b)();function y(){return(y=Object(ae.a)(te.a.mark((function e(){var t,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={delivery_fee:G,delivery_address:j._id},e.next=3,kt(t);case 3:if(a=e.sent,!(null===(r=a.data)||void 0===r?void 0:r.error)){e.next=7;break}return e.abrupt("return");case 7:v.push("/invoice/".concat(r._id)),k(fe());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return b.length?Object(r.jsxs)(z.j,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(z.s,{as:"h3",children:"Checkout"}),Object(r.jsx)(z.q,{steps:St,active:a}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),0===a?Object(r.jsxs)("div",{children:[Object(r.jsx)(z.r,{items:b,columns:Pt,perPage:b.length,showPagination:!1}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{className:"text-right",children:Object(r.jsxs)(z.s,{as:"h4",children:["SubTotal: ",Oe(he(b))]})}),Object(r.jsx)("br",{}),Object(r.jsx)(z.b,{onClick:function(e){return c(a+1)},color:"red",iconAfter:Object(r.jsx)(de.a,{}),children:"Next"})]}):null,1===a?Object(r.jsxs)("div",{children:[Object(r.jsx)(z.r,{items:h,columns:_t,perPage:p,page:x,onPageChange:function(e){return g(e)},totalItems:O,isLoading:"process"===f,selectable:!0,primaryKey:"_id",selectedRow:j,onSelectRow:function(e){return d(e)}}),h.length||"success"!==f?null:Object(r.jsx)("div",{className:"text-center my-10",children:Object(r.jsxs)(l.b,{to:"/alamat-pengiriman/tambah",children:["Kamu belum memiliki alamat pengiriman ",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)(z.b,{children:"Tambah Alamat"})]})}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsxs)(z.n,{desktop:2,tablet:2,mobile:2,children:[Object(r.jsx)("div",{children:Object(r.jsx)(z.b,{onClick:function(e){return c(a-1)},color:"gray",iconBefore:Object(r.jsx)(pt.a,{}),children:"Back"})}),Object(r.jsx)("div",{className:"text-right",children:Object(r.jsx)(z.b,{onClick:function(e){return c(a+1)},disabled:!j,color:"red",iconAfter:Object(r.jsx)(de.a,{}),children:"Next"})})]})]}):null,2===a?Object(r.jsxs)("div",{children:[Object(r.jsx)(z.r,{columns:[{Header:"",accessor:"label"},{Header:"",accessor:"value"}],items:[{label:"Alamat",value:Object(r.jsxs)("div",{children:[j.nama," ",Object(r.jsx)("br",{}),j.provinsi,", ",j.kabupaten,","," ",j.kecamatan,", ",j.kelurahan," ",Object(r.jsx)("br",{}),j.detail]})},{label:"SubTotal",value:Oe(he(b))},{label:"Ongkir",value:Oe(G)},{label:"Total",value:Object(r.jsx)("b",{children:Oe(he(b)+parseInt(G))})}],showPagination:!1}),Object(r.jsx)("br",{}),Object(r.jsxs)(z.n,{desktop:2,tablet:2,mobile:2,children:[Object(r.jsx)("div",{children:Object(r.jsx)(z.b,{onClick:function(e){return c(a-1)},color:"gray",iconBefore:Object(r.jsx)(pt.a,{}),children:"Back"})}),Object(r.jsx)("div",{className:"text-right",children:Object(r.jsx)(z.b,{onClick:function(){return y.apply(this,arguments)},color:"red",size:"large",iconAfter:Object(r.jsx)(ft.a,{}),children:"Payment"})})]})]}):null]}):Object(r.jsx)(o.a,{to:"/"})}function It(){return(It=Object(ae.a)(te.a.mark((function e(t){var a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,ne.a.get("".concat(J,"/api/invoices/").concat(t),{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e){switch(e.status){case"waiting_payment":return Object(r.jsx)(z.a,{color:"orange",children:"Waiting Payment"});case"paid":return Object(r.jsx)(z.a,{color:"green",children:"Success Payment"});case"processing":return Object(r.jsx)(z.a,{color:"yellow",children:"In Delivery"});case"delivered":return Object(r.jsx)(z.a,{color:"green",children:"Delivered"});default:return Object(r.jsx)("div",{})}}function Et(){var e,t,a,c,s,i,l,u,j=n.useState(null),d=Object(ke.a)(j,2),b=d[0],m=d[1],h=n.useState(""),O=Object(ke.a)(h,2),p=O[0],x=O[1],f=n.useState("process"),g=Object(ke.a)(f,2),v=g[0],k=g[1],y=Object(o.h)().params;return n.useEffect((function(){(function(e){return It.apply(this,arguments)})(null===y||void 0===y?void 0:y.order_id).then((function(e){var t=e.data;(null===t||void 0===t?void 0:t.error)&&x(t.message||"Terjadi kesalahan yang tidak diketahui"),m(t)})).finally((function(){return k("idle")}))})),p.length?Object(r.jsxs)(z.j,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(z.s,{as:"h3",children:"Terjadi Kesalahan"}),p]}):"process"===v?Object(r.jsx)(z.j,{children:Object(r.jsx)("div",{className:"text-center py-10",children:Object(r.jsx)("div",{className:"inline-block",children:Object(r.jsx)(ue.a,{color:"red"})})})}):Object(r.jsxs)(z.j,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(z.s,{as:"h3",children:"Invoice"}),Object(r.jsx)("br",{}),Object(r.jsx)(z.r,{showPagination:!1,items:[{label:"Status",value:Object(r.jsx)(Ct,{status:null===b||void 0===b?void 0:b.payment_status})},{label:"Order Id",value:"#"+(null===b||void 0===b||null===(e=b.order)||void 0===e?void 0:e.order_number)},{label:"Total Amount",value:Oe(null===b||void 0===b?void 0:b.total)},{label:"Billed To",value:Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:null===b||void 0===b||null===(t=b.user)||void 0===t?void 0:t.full_name}),Object(r.jsx)("br",{}),null===b||void 0===b||null===(a=b.user)||void 0===a?void 0:a.email," ",Object(r.jsx)("br",{}),null===b||void 0===b||null===(c=b.delivery_address)||void 0===c?void 0:c.detail," ",Object(r.jsx)("br",{}),null===b||void 0===b||null===(s=b.delivery_address)||void 0===s?void 0:s.kelurahan," ",Object(r.jsx)("br",{}),null===b||void 0===b||null===(i=b.delivery_address)||void 0===i?void 0:i.kecamatan," ",Object(r.jsx)("br",{}),null===b||void 0===b||null===(l=b.delivery_address)||void 0===l?void 0:l.kabupaten," ",Object(r.jsx)("br",{}),null===b||void 0===b||null===(u=b.delivery_address)||void 0===u?void 0:u.provinsi," ",Object(r.jsx)("br",{})]})},{label:"Payment To",value:Object(r.jsxs)("div",{children:[F," ",Object(r.jsx)("br",{}),V," ",Object(r.jsx)("br",{}),X.no_billing," ",Object(r.jsx)("br",{}),X.payment," ",Object(r.jsx)("br",{})]})}],columns:[{Header:"Invoice",accessor:"label"},{Header:"",accessor:"value"}]})]})}Ct.defaultProps={};var Tt=a(83),At=a.n(Tt),qt=a(84),Mt=a.n(qt),Dt=a(85),Lt=a.n(Dt),Bt=function(e){var t=e.children;return Object(r.jsx)("div",{className:"text-white text-5xl flex justify-center mb-5",children:t})},Ht=[{label:"Beranda",icon:Object(r.jsx)(Bt,{children:Object(r.jsx)(At.a,{})}),url:"/"},{label:"Address",icon:Object(r.jsx)(Bt,{children:Object(r.jsx)(Mt.a,{})}),url:"/alamat-pengiriman"},{label:"Order",icon:Object(r.jsx)(Bt,{children:Object(r.jsx)(Lt.a,{})}),url:"/order"},{label:"Logout",icon:Object(r.jsx)(Bt,{children:Object(r.jsx)(de.a,{})}),url:"/logout"}];function zt(){return Object(r.jsxs)(z.j,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(z.s,{as:"h3",children:"Akun"}),Object(r.jsx)("br",{}),Object(r.jsx)(z.n,{desktop:4,tablet:4,mobile:2,children:Ht.map((function(e,t){return Object(r.jsx)("div",{className:"px-2 pb-2",children:Object(r.jsx)(l.b,{to:e.url,children:Object(r.jsx)(z.d,{header:e.icon,body:Object(r.jsx)("div",{className:"text-center font-bold text-white",children:e.label})})})},t)}))})]})}var Rt=a(86),Kt=a.n(Rt),Jt=[{Header:"",id:"Status",accessor:function(e){return Object(r.jsxs)("div",{children:["#",e.order_number," ",Object(r.jsx)("br",{}),Object(r.jsx)(Ct,{status:e.status})]})}},{Header:"Items",accessor:function(e){return Object(r.jsx)("div",{children:e.order_items.map((function(e){return Object(r.jsxs)("div",{children:[e.name,e.qty]},e._id)}))})}},{Header:"Total",accessor:function(e){return Object(r.jsx)("div",{children:Oe(he(e.order_items)+e.delivery_fee)})}},{Header:"Invoice",accessor:function(e){return Object(r.jsx)("div",{children:Object(r.jsx)(l.b,{to:"/invoice/".concat(e._id),children:Object(r.jsx)(z.b,{color:"gray",iconBefore:Object(r.jsx)(Kt.a,{}),children:"invoice"})})})}}];function Ut(){var e=n.useState([]),t=Object(ke.a)(e,2),a=t[0],c=t[1],s=n.useState(0),i=Object(ke.a)(s,2),l=i[0],o=i[1],u=n.useState("idle"),j=Object(ke.a)(u,2),d=j[0],b=j[1],m=n.useState(1),h=Object(ke.a)(m,2),O=h[0],p=h[1],x=n.useState(10),f=Object(ke.a)(x,1)[0],g=n.useCallback(Object(ae.a)(te.a.mark((function e(){var t,a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b("process"),e.next=3,gt({limit:f,page:O});case 3:if(t=e.sent,!(a=t.data).error){e.next=8;break}return b("error"),e.abrupt("return");case 8:b("success"),c(a.data),o(a.count);case 11:case"end":return e.stop()}}),e)}))),[O,f]);return n.useEffect((function(){g()}),[g]),Object(r.jsxs)(z.j,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(z.s,{as:"h3",children:"Orders"}),Object(r.jsx)("br",{}),Object(r.jsx)(z.r,{items:a,totalItems:l,columns:Jt,onPageChange:function(e){return p(e)},page:O,isLoading:"process"===d})]})}function Gt(){var e=Object(o.g)(),t=Object(u.b)();return n.useEffect((function(){(function(){return Te.apply(this,arguments)})().then((function(){return t({type:b})})).then((function(){return e.push("/login")}))}),[e,t]),Object(r.jsx)(z.j,{size:"small",children:Object(r.jsxs)("div",{className:"text-center flex flex-col justify-center items-center",children:[Object(r.jsx)(ue.a,{color:"red"}),Object(r.jsx)("br",{}),"Logging Out"]})})}var Ft,Vt,Xt=a(50),Wt=function(e){var t=e.children,a=Object(Xt.a)(e,["children"]),n=Object(u.c)((function(e){return e.auth})).user;return Object(r.jsx)(o.b,Object(O.a)(Object(O.a)({},a),{},{children:n?t:Object(r.jsx)(o.a,{to:"/login"})}))};function Yt(e){var t=e.children,a=Object(Xt.a)(e,["children"]),n=Object(u.c)((function(e){return e.auth})).user;return Object(r.jsx)(o.b,Object(O.a)(Object(O.a)({},a),{},{children:n?Object(r.jsx)(o.a,{to:"/"}):t}))}function $t(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(ae.a)(te.a.mark((function e(t,a){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.put("".concat(J,"/api/carts"),{items:a},{headers:{authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zt(){return(Zt=Object(ae.a)(te.a.mark((function e(){var t,a,r,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},a=t.token){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,ne.a.get("".concat(J,"/api/carts"),{headers:{authorization:"Bearer ".concat(a)}});case 5:r=e.sent,(n=r.data).error||H.dispatch(ge(n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(){var e=Ft,t=Vt;Ft=H.getState().auth,Vt=H.getState().cart;var a=Ft.token;Ft!==e&&(localStorage.setItem("auth",JSON.stringify(Ft)),$t(a,Vt)),Vt!==t&&(localStorage.setItem("cart",JSON.stringify(Vt)),$t(a,Vt))}var ta=function(){return c.a.useEffect((function(){H.subscribe(ea),function(){Zt.apply(this,arguments)}()}),[]),Object(r.jsx)(u.a,{store:H,children:Object(r.jsx)(l.a,{children:Object(r.jsxs)(o.d,{children:[Object(r.jsx)(Wt,{path:"/logout",children:Object(r.jsx)(Gt,{})}),Object(r.jsx)(Wt,{path:"/order",children:Object(r.jsx)(Ut,{})}),Object(r.jsx)(Wt,{path:"/account",children:Object(r.jsx)(zt,{})}),Object(r.jsx)(Wt,{path:"/invoice/:order_id",children:Object(r.jsx)(Et,{})}),Object(r.jsx)(Wt,{path:"/checkout",children:Object(r.jsx)(Nt,{})}),Object(r.jsx)(Wt,{path:"/alamat-pengiriman/tambah",children:Object(r.jsx)(nt,{})}),Object(r.jsx)(Wt,{path:"/alamat-pengiriman",children:Object(r.jsx)(jt,{})}),Object(r.jsx)(Yt,{path:"/login",children:Object(r.jsx)(Fe,{})}),Object(r.jsx)(Yt,{path:"/register/berhasil",children:Object(r.jsx)(Be,{})}),Object(r.jsx)(Yt,{path:"/register",children:Object(r.jsx)(Le,{})}),Object(r.jsx)(o.b,{path:"/",children:Object(r.jsx)(ve,{})})]})})})},aa=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,137)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};a(135);i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(ta,{})}),document.getElementById("root")),aa()}},[[136,1,2]]]);
//# sourceMappingURL=main.990506b3.chunk.js.map